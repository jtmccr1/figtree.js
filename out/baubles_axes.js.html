<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: baubles/axes.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: baubles/axes.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
import {axisBottom,axisTop,axisLeft,axisRight} from "d3";
import {mergeDeep} from "../utilities";
import uuid from "uuid";

/** @module bauble */

/**
 * The Axes class
 *
 * This class defines and draws an axis. It can be shared by multiple plots
 * to allow the axes to be linked when zoomed or panned.
 */
export class Axis {
    static DEFAULT_SETTINGS() {
        return {
            tickArguments: [5, "f"],
            title: {
                    text:"",
                    xPadding:0,
                    yPadding:0,
                    rotation:0
            },
            id: `a${uuid.v4()}`,
            location:"bottom",
        };
    }

    /**
     /**
     * The constructor takes a setting object.
     *
     * @param {Object} settings
     * @param {Array} [settings.tickArguments=[5,"f"] - Arguments passed to the d3 tickArgument function for the axis
     * @param {Object} [settings.title={
                    text:"",
                    xPadding:0,
                    yPadding:0,
                    rotation:0
            }] - options pertaining to the axis title
     @param {string} settings.title.text - The axis title
     @param {number} settings.title.xPadding -number of pixels to move the text in the x direction

     @param {number} settings.title.yPadding -number of pixels to move the text in the y direction

     @param {string} [settings.location="bottom"] - the direction of the ticks on the axis bottom,top,left,right

     */
    constructor(settings = {}) {
        this.settings = mergeDeep(Axis.DEFAULT_SETTINGS(),settings);
        this.d3Axis = getD3Axis(this.settings.location)
    }

    createAxis({selection, x, y, length,scale}) {

         this.axis = this.d3Axis( scale)
            .tickArguments(this.settings.tickArguments);

        this.axisSelectiion=selection
            .append("g")
            .attr("id", this.settings.id)
            .attr("class", "axis")
            .attr("transform", `translate(${x}, ${y})`)
            .call(this.axis);

        const pos={x:0,y:0};
        if(this.settings.location.toLowerCase() === "bottom" || this.settings.location.toLowerCase() === "top"){
            pos.x = length/2
        }else{
            pos.y=length/2
        }

        this.axisTitleSelection =selection
            .append("g")
            .attr("id", `${this.settings.id}-axis-label`)
            .attr("class", "axis-label")
            .attr("transform", `translate(${x}, ${y})`)
            .append("text")
            .attr("transform", `translate(${pos.x+this.settings.title.xPadding}, ${pos.y+this.settings.title.yPadding}) rotate(${this.settings.title.rotation})`)
            .attr("alignment-baseline", "hanging")
            .style("text-anchor", "middle")
            .text(this.settings.title.text);

        return selection;
    };

    updateAxis({selection, x, y, length,scale}) {
        // update the scale's domain
        this.axis = this.d3Axis( scale)
            .tickArguments(this.settings.tickArguments);


        selection
            .select(`g#${this.settings.id}`)
            .transition()
            // .duration()
            .attr("transform", `translate(${x}, ${y})`)
            .call(this.axis);

        const pos={x:0,y:0};
        if(this.settings.location.toLowerCase() === "bottom" || this.settings.location.toLowerCase() === "top"){
            pos.x = length/2
        }else{
            pos.y=length/2
        }
        selection
            .select(`g#${this.settings.id}-axis-label`)
                .transition()
                // .duration()
                .attr("transform", `translate(${x}, ${y})`)
            .select("text")
                .transition()
                // .duration()
                .attr("transform", `translate(${pos.x+this.settings.title.xPadding}, ${pos.y+this.settings.title.yPadding}) rotate(${this.settings.title.rotation})`)
                .attr("alignment-baseline", "hanging")
                .style("text-anchor", "middle")
                .text(this.settings.title.text);

    };


}


function getD3Axis(location) {
    switch (location.toLowerCase()) {
        case "bottom":
            return axisBottom;
        case "left":
            return axisLeft;
        case "top":
            return axisTop;
        case "right":
            return axisRight;
        default:
            throw new Error(`Unknown location type ${this.location}`);
    }
}



</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-bauble.html">bauble</a></li><li><a href="module-figtree.html">figtree</a></li><li><a href="module-layout.html">layout</a></li><li><a href="module-roottotipplot.html">roottotipplot</a></li><li><a href="module-tree.html">tree</a></li></ul><h3>Classes</h3><ul><li><a href="module-bauble.Axis.html">Axis</a></li><li><a href="module-bauble.Bauble.html">Bauble</a></li><li><a href="module-bauble.BranchBauble.html">BranchBauble</a></li><li><a href="module-bauble.CircleBauble.html">CircleBauble</a></li><li><a href="module-bauble.RectangularBauble.html">RectangularBauble</a></li><li><a href="module-bauble.RoughCircleBauble.html">RoughCircleBauble</a></li><li><a href="module-bauble.RoughCircleBauble.DEFAULT_SETTINGS.html">DEFAULT_SETTINGS</a></li><li><a href="module-figtree.FigTree.html">FigTree</a></li><li><a href="module-layout.AbstractLayout.html">AbstractLayout</a></li><li><a href="module-layout.AbstractLayout.DEFAULT_SETTINGS.html">DEFAULT_SETTINGS</a></li><li><a href="module-layout.EqualAngleLayout.html">EqualAngleLayout</a></li><li><a href="module-layout.ExplodedLayout.html">ExplodedLayout</a></li><li><a href="module-layout.layoutInterface.html">layoutInterface</a></li><li><a href="module-layout.RectangularLayout.html">RectangularLayout</a></li><li><a href="module-layout.TransmissionLayout.html">TransmissionLayout</a></li><li><a href="module-roottotipplot.RootToTipPlot.html">RootToTipPlot</a></li><li><a href="module-tree.Tree.html">Tree</a></li></ul><h3>Global</h3><ul><li><a href="global.html#dateToDecimal">dateToDecimal</a></li><li><a href="global.html#decimalToDate">decimalToDate</a></li><li><a href="global.html#leapYear">leapYear</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Oct 30 2019 15:26:42 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
